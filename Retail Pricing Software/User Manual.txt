ИНТЕРФЕЙС ПО РАБОТЕ С АНАЛИЗАТОРОМ

ЗАПРОСЫ К АНАЛИЗАТОРУ
Структура запросов:
1. Запросы на построение отчетов. Структура:
/report/<projectId>/?<parameters>
Описание <paramaters> (задают фильтры):
1.1. intervals - список чисел (long, unix time) через запятую. Интервалы времени, за которые необходимо произвести однотипные расчеты.
1.2. type - тип отчета. На данный момент может принимать два значения: IncomeDynamics (динамика выручки) или AvgCheckDynamics (динамика среднего чека).
1.3. assets - список id товаров через запятую
1.4. groups - список id групп товаров через запятую
1.5. shops - список id торговых точек через запятую
1.6. useSupplementAssets - Нужно ли фильтровать по дополнению к списку? Если 1 - нужно фильтровать по дополнению указанного множества, если 0 - нужно фильтровать по указанному множеству. Значение по умолчанию: 1.
1.7. useSupplementGroups - аналогично
1.8. useSupplementShops - аналогично

Вычислить суммарную выручку по проекту 100 за временные периоды [100,200) и [200,400) по розничным точкам id=12 и 13 и всем товарам, кроме id=6 и 8:
/report/100/?type=IncomeDynamics&intervals=100,200,400&shops=12,13&assets=6,8&useSupplementShops=0&useSupplementAssets=1

Вычислить суммарную выручку за всю историю по проекту 100:
/report/100/?type=IncomdeDynamics
2. Запросы на получение результатов расчетов
/result/<projectId>/?calcId=<calcId>
Пример. Получить результаты расчетов по проекту 100 и calcId = 12345: /result/100/?calcId=12345


ОТВЕТЫ АНАЛИЗАТОРА
Анализатор отвечает в формате JSON. Возможные поля:
1. calcId: целове числовое значение
2. response: строка. Результат расчетов
3. success: true или false. false означает, что в процессе обработки запроса у анализатора возникла ошибка
4. error: строка. Содержит текстовое описание ошибки (если она реализовалась)

СТРУКТУРА И ПРИМЕРЫ ОТВЕТОВ АНАЛИЗАТОРА:
1. Задача принята к исполнению. Возвращается идентификатор calcId:
{ "calcId": 12345, "success": true }
2. Возвращение результата расчетов:
{ "calcId": 12345, "response": "456.26,12456.134,45,56.000000", "success": true } - расчеты выполнены
{ "calcId": 12345, "response": "wait", "success": true } - расчеты еще не завершены
{ "calcId": 12345, "response": "error", "success": false } - произошла ошибка анализатора при выполении расчетов
3. Ошибочный запрос (неверная строка url):
{ "calcId": -1, "error": "Bad Request", "success": false }
